PROGRAM=USER
EXTRA_COMPONENTS = user modules
EXTRA_COMPONENTS += $(RTOS_PATH)/extras/fatfs
EXTRA_COMPONENTS += $(RTOS_PATH)/extras/sdio
EXTRA_COMPONENTS += $(RTOS_PATH)/extras/sntp
EXTRA_COMPONENTS += $(RTOS_PATH)/extras/spiffs
EXTRA_COMPONENTS += $(RTOS_PATH)/extras/i2c

EXTRA_CFLAGS += -DJERRY_CONST_DATA='__attribute__((section(".irom0.literal")))'
#SPIFFS
FLASH_SIZE = 32
SPIFFS_BASE_ADDR = 0x200000
SPIFFS_SIZE = 0x100000
#EXTRA_CFLAGS += -D SPIFFS_CACHE=0

#FATFS
FATFS_USE_MKFS = 0
FATFS_USE_EXPAND = 0
FATFS_USE_CHMOD = 0
FATFS_USE_LABEL = 0
FATFS_USE_FORWARD = 1
FATFS_MAX_LFN = 255
FATFS_FS_RPATH = 1
FATFS_FS_EXFAT = 0
FATFS_FS_LOCK = 64
FATFS_USE_LFN = 3
FATFS_USE_FASTSEEK = 0

EXTRA_CFLAGS += -D FF_USE_LFN=3 -D FF_FS_EXFAT=$(FATFS_FS_EXFAT) -D _FF_HIGH_SPEED_SPI_FREQ_DIV=SPI_FREQ_DIV_125K
EXTRA_CFLAGS += -D FF_USE_MKFS=$(FATFS_USE_MKFS) -D FF_FS_EXFAT=$(FATFS_FS_EXFAT) -D FF_CODE_PAGE=437 -D FF_USE_CHMOD=$(FATFS_USE_CHMOD)
EXTRA_CFLAGS += -D FF_USE_LABEL=$(FATFS_USE_LABEL) -D FF_USE_FORWARD=$(FATFS_USE_FORWARD) -D FF_MAX_LFN=$(FATFS_MAX_LFN)
EXTRA_CFLAGS += -D FF_FS_RPATH=$(FATFS_FS_RPATH) -D FF_USE_LFN=$(FATFS_USE_LFN) -D FF_USE_FASTSEEK=$(FATFS_USE_FASTSEEK) -D ESP8266_ENABLE_LOW_ICACHE=0

#JERRY
LINKER_SCRIPTS := ld/program.ld
FLAVOR := release
PRINTF_SCANF_FLOAT_SUPPORT = 0

ifeq ($(JERRYDEBUGGER), ON)
	EXTRA_CFLAGS += -D JERRY_DEBUGGER
endif

ifeq ($(REDIRECT_STDOUT), ON)
	EXTRA_CFLAGS += -D REDIRECT_STDOUT=1
endif

ifeq ($(REDIRECT_STDOUT), NONE)
	EXTRA_CFLAGS += -D REDIRECT_STDOUT=2
endif


EXTRA_LDFLAGS = -L$(CUR_DIR)libs
LIBS = hal jerry-core jerry-libm

include $(RTOS_PATH)/common.mk
